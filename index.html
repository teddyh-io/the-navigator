<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Navigator</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Left Panel: Search & Inventory -->
        <div class="left-panel">
            <div class="header">
                <img src="logo.png" alt="The Navigator Inventory Finder" class="logo">
            </div>

            <!-- Search Screen -->
            <div id="searchScreen" class="search-screen">
                <div class="search-content">
                    <div class="search-intro">
                        <h2>Search for Inventory</h2>
                        <p>Please enter your email address to continue.</p>
                    </div>
                    <form id="searchForm">
                        <div class="form-group" id="emailGroup">
                            <label for="userEmail">Email Address</label>
                            <input type="email" id="userEmail" placeholder="scrooge@mcduckventures.online" value="" required>
                        </div>
                        <div id="searchOptions" style="display: none;">
                            <div class="form-group" id="zipSelectorGroup">
                                <div class="zip-selector-info">
                                <label for="zipInput">ZIP Code</label>
                                <span id="zipCount"></span>
                                </div>
                                <input type="text" id="zipInput" list="zipCodes" placeholder="Select or enter ZIP code" pattern="[0-9]{5}" maxlength="5" autocomplete="off">
                                <datalist id="zipCodes">
                                </datalist>
                            </div>
                            <div class="form-group" id="radiusGroup">
                                <div class="slider-container">
                                    <div class="slider-info">
                                        <label for="radius">Radius</label>
                                        <div class="slider-value">
                                            <span id="radiusValue">30</span>
                                            <span style="font-size: 12px; color: #999;">miles</span>
                                        </div>
                                    </div>
                                    <input type="range" id="radius" class="radius-slider" min="5" max="100" value="30" step="5">
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="search-btn">
                            <span class="btn-text" id="submitBtnText">Next</span>
                            <span class="loader" style="display: none;"></span>
                        </button>
                        <div id="searchesRemaining" class="searches-remaining" style="display: none;">
                            <span id="searchesRemainingText"></span>
                        </div>
                        <div id="reloadLastSearchLink" class="reload-search-link" style="display: none;">
                            <a href="#" id="reloadSearchBtn">‚Üª Reload last search result</a>
                        </div>
                    </form>
                    
                    <!-- Subscription Box -->
                    <div id="subscriptionBox" class="subscription-box">
                        <div class="subscription-header">
                            <h3>Not a member yet?</h3>
                            <p>Subscribe now to search for metals inventory across warehouses nationwide.</p>
                        </div>
                        
                        <div class="subscription-plans">
                            <div class="plan-card">
                                <div class="plan-info">
                                    <div class="plan-name">BASIC</div>
                                    <div class="plan-price">
                                        <span class="price-amount">$19.99</span>
                                        <span class="price-period">/month</span>
                                    </div>
                                </div>
                                <div class="plan-features">
                                    <div class="feature">‚úì 2 searches a day</div>
                                    <div class="feature">‚úì 2 zip codes</div>
                                </div>
                                <a href="https://buy.stripe.com/3cI7sMek06rS0Aiblk3AY00" class="subscribe-btn">Subscribe</a>
                            </div>
                            
                            <div class="plan-card plan-plus">
                                <div class="plan-badge">RECOMMENDED</div>
                                <div class="plan-info">
                                    <div class="plan-name">PLUS</div>
                                    <div class="plan-price">
                                        <span class="price-amount">$29.99</span>
                                        <span class="price-period">/month</span>
                                    </div>
                                </div>
                                <div class="plan-features">
                                    <div class="feature">‚úì 5 searches a day</div>
                                    <div class="feature">‚úì 5 zip codes</div>
                                    <div class="feature">‚úì KML Export</div>
                                    <div class="feature">‚úì Autocheck</div>
                                    <div class="feature-detail">Get an email when your area restocks</div>
                                    <div class="feature feature-restockiq">
                                        <span>‚úì</span>
                                        <div class="restock-brand-inline">
                                            <span>restockIQ</span>
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="feature-detail">View store competitiveness and restock predictions</div>
                                </div>
                                <a href="https://buy.stripe.com/9B614ocbS03u1Emblk3AY01" class="subscribe-btn subscribe-btn-plus">Subscribe</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="returningUserBanner" class="returning-user-banner" style="display: none;">
                    <div class="banner-top">
                        <span id="returningUserText">Searching as <strong></strong></span>
                        <span id="planPill" class="plan-pill"></span>
                    </div>
                    <div class="banner-divider"></div>
                    <div class="banner-bottom">
                        <div class="banner-bottom-left">
                            <a href="https://billing.stripe.com/p/login/3cI7sMek06rS0Aiblk3AY00" target="_blank" class="manage-subscription-link">Manage Plan</a>
                            <a href="#" id="alertsLink">Setup Autocheck</a>
                        </div>
                        <a href="#" id="notYouLink">Not you?</a>
                    </div>
                </div>
            </div>

            <!-- Results Screen -->
            <div id="resultsScreen" class="results-screen" style="display: none;">
                <div class="results-header">
                    <button id="backBtn" class="back-btn">‚Üê Back to Search</button>
                    <div class="header-title-row">
                        <h2>Available Inventory</h2>
                        <button id="downloadKmlBtn" class="icon-btn" title="Download KML file">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                    <p class="summary" id="summary"></p>
                    <!-- Mobile Tab Navigation -->
                    <div class="mobile-tabs">
                        <button class="tab-btn active" data-tab="list">List View</button>
                        <button class="tab-btn" data-tab="map">Map View</button>
                    </div>
                </div>
                
                <div id="noResults" style="display: none;" class="no-results">
                    <div class="icon">üòø</div>
                    <h3>No Stock Available</h3>
                    <p>There are no warehouses with inventory in your search area. Try increasing your search radius.</p>
                </div>

                <div id="warehousesList" class="warehouses-list"></div>
            </div>
        </div>

        <!-- Right Panel: Map -->
        <div class="right-panel">
            <div id="map"></div>
        </div>
    </div>

    <!-- Alerts Modal -->
    <div id="alertsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Setup Autocheck</h2>
                <button class="modal-close" id="closeAlertsModal">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-intro">Get notified when your area restocks. Enter your ZIP code and search radius below.</p>
                <form id="alertsForm">
                    <div class="form-group">
                        <label for="alertZipInput">ZIP Code</label>
                        <input type="text" id="alertZipInput" placeholder="Enter ZIP code" pattern="[0-9]{5}" maxlength="5" required>
                    </div>
                    <div class="form-group">
                        <div class="slider-container">
                            <div class="slider-info">
                                <label for="alertRadius">Radius</label>
                                <div class="slider-value">
                                    <span id="alertRadiusValue">100</span>
                                    <span style="font-size: 12px; color: #999;">miles</span>
                                </div>
                            </div>
                            <input type="range" id="alertRadius" class="radius-slider alert-slider" min="5" max="100" value="100" step="5">
                        </div>
                    </div>
                    <button type="submit" class="alert-btn">
                        <span class="btn-text" id="alertBtnText">Setup Autocheck</span>
                        <span class="loader" style="display: none;"></span>
                    </button>
                </form>
                <div id="alertsMessage" class="alerts-message" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app-min.js"></script>
</body>
</html>

